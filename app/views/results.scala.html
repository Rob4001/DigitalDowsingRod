@(processId: String)

@scripts(processId: String) = {
<script type="text/javascript">
var ping;
function getPercentage()
            {

                $.ajax({
                    type: "GET",
                    url: "/progress/@processId",
                    dataType: "html",
                    success: function(html)
                        {
                        $('#processbar').css("width",html+"%");

							if(html=="100"){
								clearInterval(ping);
								getResults();
							}
                        }
                });

            }
            function getResults(){
            	 $.ajax({
                    type: "GET",
                    url: "/report/@processId",
                    dataType: "html",
                    success: function(html)
                        {
                        $('#main').html(html);
								clearInterval(ping);					
                        }
                });
            }

            $(document).ready(function() {


            ping = setInterval("getPercentage()",100);
            });

</script>
}

@main("DigitalDowsingRod - Results",scripts(processId)) {

	<h3>Calculating @processId</h3>
	<div class="progress progress-striped active">
  		<div data-url="@@{controllers.Application.progress(processId)}" id="processbar" class="progress-bar" style="width: 0%"></div>
	</div>
}
